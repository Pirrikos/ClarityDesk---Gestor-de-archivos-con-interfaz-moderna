ClarityDesk Pro - √Årbol de Estructura
=====================================
Fecha: 29 de enero de 2025 (Actualizado despu√©s de refactorizaci√≥n completa)

C:.
‚îÇ   arbol.txt
‚îÇ   main.py                          # Punto de entrada principal
‚îÇ   main.spec                        # Especificaci√≥n PyInstaller
‚îÇ   requirements.txt                 # Dependencias Python
‚îÇ   cursorrules-v2-complete          # Reglas de Cursor
‚îÇ
‚îú‚îÄ‚îÄ‚îÄ.venv                            # Entorno virtual Python
‚îÇ
‚îú‚îÄ‚îÄ‚îÄapp                              # Paquete principal
‚îÇ   ‚îÇ   __init__.py
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ‚îÄcore                         # Core (vac√≠o actualmente)
‚îÇ   ‚îÇ   ‚îÇ   __init__.py
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ‚îÄmanagers                     # Gestores de alto nivel (10 archivos)
‚îÇ   ‚îÇ   ‚îÇ   __init__.py
‚îÇ   ‚îÇ   ‚îÇ   tab_manager.py           # Gestor de tabs (221 l√≠neas) ‚ö†Ô∏è
‚îÇ   ‚îÇ   ‚îÇ   tab_manager_actions.py   # Acciones de tabs (add/remove/select)
‚îÇ   ‚îÇ   ‚îÇ   tab_manager_signals.py   # Handlers de se√±ales
‚îÇ   ‚îÇ   ‚îÇ   tab_manager_init.py      # Inicializaci√≥n
‚îÇ   ‚îÇ   ‚îÇ   tab_manager_restore.py   # Restauraci√≥n de estado
‚îÇ   ‚îÇ   ‚îÇ   tab_manager_state.py     # Estado de tabs
‚îÇ   ‚îÇ   ‚îÇ   focus_manager.py         # Orquestador de Focus
‚îÇ   ‚îÇ   ‚îÇ   files_manager.py         # Gestor de operaciones de archivos
‚îÇ   ‚îÇ   ‚îÇ   file_state_manager.py    # Gestor de estados de archivos
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ‚îÄmodels                       # Modelos de datos (2 archivos)
‚îÇ   ‚îÇ   ‚îÇ   __init__.py
‚îÇ   ‚îÇ   ‚îÇ   file_operation_result.py # Resultado de operaciones
‚îÇ   ‚îÇ   ‚îÇ   file_stack.py            # Modelo de stack de archivos
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ‚îÄservices                      # Servicios de l√≥gica de negocio (61 archivos)
‚îÇ   ‚îÇ   ‚îÇ   __init__.py
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   # Tab Management (11 archivos)
‚îÇ   ‚îÇ   ‚îÇ   tab_manager_init.py      # Inicializaci√≥n de TabManager
‚îÇ   ‚îÇ   ‚îÇ   tab_state_manager.py     # Gesti√≥n de estado de tabs
‚îÇ   ‚îÇ   ‚îÇ   tab_storage_service.py   # Persistencia de tabs
‚îÇ   ‚îÇ   ‚îÇ   tab_finder.py            # B√∫squeda de tabs
‚îÇ   ‚îÇ   ‚îÇ   tab_validator.py         # Validaci√≥n de carpetas
‚îÇ   ‚îÇ   ‚îÇ   tab_path_normalizer.py   # Normalizaci√≥n de rutas (√∫nica fuente)
‚îÇ   ‚îÇ   ‚îÇ   tab_history_manager.py   # Historial de navegaci√≥n
‚îÇ   ‚îÇ   ‚îÇ   tab_navigation_handler.py # Navegaci√≥n back/forward
‚îÇ   ‚îÇ   ‚îÇ   tab_utils.py             # Utilidades de tabs (get_tab_display_name)
‚îÇ   ‚îÇ   ‚îÇ   workspace_service.py     # Servicio de workspace
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   # File Operations (7 archivos)
‚îÇ   ‚îÇ   ‚îÇ   file_list_service.py     # Listado de archivos
‚îÇ   ‚îÇ   ‚îÇ   file_move_service.py     # Movimiento de archivos
‚îÇ   ‚îÇ   ‚îÇ   file_delete_service.py   # Eliminaci√≥n (papelera)
‚îÇ   ‚îÇ   ‚îÇ   file_rename_service.py   # Renombrado individual
‚îÇ   ‚îÇ   ‚îÇ   file_path_utils.py       # Utilidades de rutas
‚îÇ   ‚îÇ   ‚îÇ   file_extensions.py      # Extensiones soportadas
‚îÇ   ‚îÇ   ‚îÇ   file_open_service.py     # Apertura de archivos con sistema
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   # File State Storage (6 archivos - Refactorizado)
‚îÇ   ‚îÇ   ‚îÇ   file_state_storage.py    # Orquestador (re-exporta APIs)
‚îÇ   ‚îÇ   ‚îÇ   file_state_storage_helpers.py # Helpers (DB path, connection, file ID)
‚îÇ   ‚îÇ   ‚îÇ   file_state_storage_init.py # Inicializaci√≥n y schema
‚îÇ   ‚îÇ   ‚îÇ   file_state_storage_crud.py # CRUD individual (148 l√≠neas)
‚îÇ   ‚îÇ   ‚îÇ   file_state_storage_batch.py # Operaciones batch (164 l√≠neas)
‚îÇ   ‚îÇ   ‚îÇ   file_state_storage_rename.py # Operaciones de renombrado
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   # Icons & Preview (18 archivos - Refactorizado)
‚îÇ   ‚îÇ   ‚îÇ   icon_service.py          # Servicio principal de iconos (con cache mtime)
‚îÇ   ‚îÇ   ‚îÇ   icon_fallback_helper.py  # Helper de fallback de iconos
‚îÇ   ‚îÇ   ‚îÇ   preview_service.py       # Generaci√≥n de previews
‚îÇ   ‚îÇ   ‚îÇ   preview_pdf_service.py  # Servicio PDF/DOCX (con workers async)
‚îÇ   ‚îÇ   ‚îÇ   icon_processor.py        # Procesamiento de iconos
‚îÇ   ‚îÇ   ‚îÇ   icon_renderer.py         # Orquestador (re-exporta APIs)
‚îÇ   ‚îÇ   ‚îÇ   icon_renderer_constants.py # Constantes (POPPLER_PATH, SVG_ICON_MAP)
‚îÇ   ‚îÇ   ‚îÇ   icon_renderer_pdf.py     # Renderizado PDF preview
‚îÇ   ‚îÇ   ‚îÇ   icon_renderer_docx.py    # Renderizado DOCX preview
‚îÇ   ‚îÇ   ‚îÇ   icon_renderer_image.py   # Renderizado imagen preview
‚îÇ   ‚îÇ   ‚îÇ   icon_renderer_svg.py     # Renderizado SVG iconos
‚îÇ   ‚îÇ   ‚îÇ   icon_normalizer.py      # Normalizaci√≥n visual
‚îÇ   ‚îÇ   ‚îÇ   icon_conversion_helper.py # Conversi√≥n de formatos
‚îÇ   ‚îÇ   ‚îÇ   icon_extraction_fallbacks.py # Fallbacks de extracci√≥n
‚îÇ   ‚îÇ   ‚îÇ   windows_icon_extractor.py # Extracci√≥n nativa Windows
‚îÇ   ‚îÇ   ‚îÇ   windows_icon_converter.py # Conversi√≥n HICON a QPixmap
‚îÇ   ‚îÇ   ‚îÇ   pixel_analyzer.py        # An√°lisis de p√≠xeles
‚îÇ   ‚îÇ   ‚îÇ   pdf_renderer.py          # Renderizado de PDFs
‚îÇ   ‚îÇ   ‚îÇ   docx_converter.py        # Conversi√≥n DOCX a PDF (con cache limitado)
‚îÇ   ‚îÇ   ‚îÇ   preview_scaling.py      # Escalado de previews
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   # QThread Workers (3 archivos - Nuevo)
‚îÇ   ‚îÇ   ‚îÇ   pdf_render_worker.py     # Worker para renderizado PDF async
‚îÇ   ‚îÇ   ‚îÇ   docx_convert_worker.py   # Worker para conversi√≥n DOCX async
‚îÇ   ‚îÇ   ‚îÇ   icon_batch_worker.py     # Worker para generaci√≥n batch de iconos async
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   # Rename (1 archivo)
‚îÇ   ‚îÇ   ‚îÇ   rename_service.py        # Renombrado masivo
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   # Trash Operations (3 archivos)
‚îÇ   ‚îÇ   ‚îÇ   trash_operations.py     # Operaciones de papelera
‚îÇ   ‚îÇ   ‚îÇ   trash_storage.py        # Almacenamiento de papelera
‚îÇ   ‚îÇ   ‚îÇ   trash_limits.py         # L√≠mites de papelera (sin cleanup_if_needed)
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   # Desktop Operations (4 archivos)
‚îÇ   ‚îÇ   ‚îÇ   desktop_operations.py   # Orquestador (re-exporta APIs)
‚îÇ   ‚îÇ   ‚îÇ   desktop_operations_scan.py # Escaneo y detecci√≥n dock
‚îÇ   ‚îÇ   ‚îÇ   desktop_drag_ops.py     # Operaciones drag & drop escritorio
‚îÇ   ‚îÇ   ‚îÇ   desktop_path_helper.py  # Helper de rutas escritorio
‚îÇ   ‚îÇ   ‚îÇ   desktop_visibility.py   # Helpers de visibilidad escritorio
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   # File Stack & Filter (4 archivos)
‚îÇ   ‚îÇ   ‚îÇ   file_stack_service.py   # Servicio de stacks
‚îÇ   ‚îÇ   ‚îÇ   file_scan_service.py    # Escaneo de archivos
‚îÇ   ‚îÇ   ‚îÇ   file_filter_service.py  # Filtrado de archivos
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   # System (3 archivos)
‚îÇ   ‚îÇ   ‚îÇ   filesystem_watcher_service.py # Observador de cambios
‚îÇ   ‚îÇ   ‚îÇ   settings_service.py     # Servicio de configuraci√≥n
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄui                           # Interfaz de usuario
‚îÇ       ‚îÇ   __init__.py
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ‚îÄwidgets                  # Componentes UI reutilizables (70 archivos)
‚îÇ       ‚îÇ   ‚îÇ   __init__.py
‚îÇ       ‚îÇ   ‚îÇ
‚îÇ       ‚îÇ   ‚îÇ   # Views (Core) - Refactorizado
‚îÇ       ‚îÇ   ‚îÇ   file_view_container.py    # Contenedor principal
‚îÇ       ‚îÇ   ‚îÇ   file_view_setup.py        # Setup UI contenedor
‚îÇ       ‚îÇ   ‚îÇ   file_view_sync.py         # Sincronizaci√≥n archivos
‚îÇ       ‚îÇ   ‚îÇ   file_view_tabs.py         # Gesti√≥n de tabs
‚îÇ       ‚îÇ   ‚îÇ   file_view_handlers.py     # Manejadores de vista
‚îÇ       ‚îÇ   ‚îÇ   file_grid_view.py         # Vista de cuadr√≠cula
‚îÇ       ‚îÇ   ‚îÇ   file_grid_view_scroll.py  # Helpers de scroll
‚îÇ       ‚îÇ   ‚îÇ   file_grid_view_drag.py    # Handlers de drag
‚îÇ       ‚îÇ   ‚îÇ   file_grid_view_events.py  # Event handlers
‚îÇ       ‚îÇ   ‚îÇ   file_grid_view_layout.py  # Helpers de layout
‚îÇ       ‚îÇ   ‚îÇ   file_list_view.py         # Vista de lista
‚îÇ       ‚îÇ   ‚îÇ   file_list_handlers.py     # Event handlers de lista
‚îÇ       ‚îÇ   ‚îÇ   file_list_renderer.py     # Renderizado de lista
‚îÇ       ‚îÇ   ‚îÇ
‚îÇ       ‚îÇ   ‚îÇ   # File Tile (Refactorizado - 9 m√≥dulos)
‚îÇ       ‚îÇ   ‚îÇ   file_tile.py              # Tile individual
‚îÇ       ‚îÇ   ‚îÇ   file_tile_setup.py        # Setup UI del tile
‚îÇ       ‚îÇ   ‚îÇ   file_tile_icon.py         # Manejo de iconos
‚îÇ       ‚îÇ   ‚îÇ   file_tile_anim.py         # Animaciones
‚îÇ       ‚îÇ   ‚îÇ   file_tile_events.py       # Eventos mouse/drag
‚îÇ       ‚îÇ   ‚îÇ   file_tile_states.py       # Estados y selecci√≥n
‚îÇ       ‚îÇ   ‚îÇ   file_tile_drag.py         # Drag & drop
‚îÇ       ‚îÇ   ‚îÇ   file_tile_controller.py   # Controlador de selecci√≥n
‚îÇ       ‚îÇ   ‚îÇ   file_tile_paint.py        # Paint helpers
‚îÇ       ‚îÇ   ‚îÇ
‚îÇ       ‚îÇ   ‚îÇ   # Stack & Desktop Tiles
‚îÇ       ‚îÇ   ‚îÇ   file_stack_tile.py        # Tile de stack
‚îÇ       ‚îÇ   ‚îÇ   desktop_stack_tile.py     # Tile de escritorio
‚îÇ       ‚îÇ   ‚îÇ   focus_stack_tile.py       # Tile de Focus
‚îÇ       ‚îÇ   ‚îÇ   focus_stack_tile_setup.py # Setup de Focus tile
‚îÇ       ‚îÇ   ‚îÇ   focus_stack_tile_paint.py # Paint de Focus tile
‚îÇ       ‚îÇ   ‚îÇ   focus_stack_tile_drag.py  # Drag de Focus tile
‚îÇ       ‚îÇ   ‚îÇ   focus_stack_tile_events.py # Eventos de Focus tile
‚îÇ       ‚îÇ   ‚îÇ   settings_stack_tile.py    # Tile de configuraci√≥n
‚îÇ       ‚îÇ   ‚îÇ
‚îÇ       ‚îÇ   ‚îÇ   # Grid Components (Refactorizado)
‚îÇ       ‚îÇ   ‚îÇ   grid_content_widget.py    # Contenido de grid
‚îÇ       ‚îÇ   ‚îÇ   grid_layout_engine.py     # Motor de layout
‚îÇ       ‚îÇ   ‚îÇ   grid_tile_builder.py      # Constructor de tiles
‚îÇ       ‚îÇ   ‚îÇ   grid_tile_positions.py    # C√°lculo de posiciones
‚îÇ       ‚îÇ   ‚îÇ   grid_tile_animations.py   # Animaciones de tiles
‚îÇ       ‚îÇ   ‚îÇ   grid_layout_config.py     # Configuraci√≥n de layout
‚îÇ       ‚îÇ   ‚îÇ   grid_selection_logic.py   # L√≥gica de selecci√≥n
‚îÇ       ‚îÇ   ‚îÇ   grid_selection_manager.py # Gesti√≥n de selecci√≥n
‚îÇ       ‚îÇ   ‚îÇ
‚îÇ       ‚îÇ   ‚îÇ   # Tree Sidebar
‚îÇ       ‚îÇ   ‚îÇ   folder_tree_sidebar.py    # Sidebar de √°rbol
‚îÇ       ‚îÇ   ‚îÇ   folder_tree_model.py      # Modelo del √°rbol
‚îÇ       ‚îÇ   ‚îÇ   folder_tree_handlers.py   # Manejadores de eventos
‚îÇ       ‚îÇ   ‚îÇ   folder_tree_drag_handler.py # Drag & drop √°rbol
‚îÇ       ‚îÇ   ‚îÇ   folder_tree_styles.py     # Estilos del √°rbol
‚îÇ       ‚îÇ   ‚îÇ
‚îÇ       ‚îÇ   ‚îÇ   # Drag & Drop
‚îÇ       ‚îÇ   ‚îÇ   drag_common.py            # Utilidades comunes
‚îÇ       ‚îÇ   ‚îÇ   drag_preview_helper.py    # Ayuda de preview drag
‚îÇ       ‚îÇ   ‚îÇ   file_drop_handler.py      # Manejador de drops
‚îÇ       ‚îÇ   ‚îÇ   container_drag_handler.py # Drag del contenedor
‚îÇ       ‚îÇ   ‚îÇ   tile_drag_handler.py      # Drag de tiles
‚îÇ       ‚îÇ   ‚îÇ   list_drag_handler.py      # Drag de lista
‚îÇ       ‚îÇ   ‚îÇ
‚îÇ       ‚îÇ   ‚îÇ   # Toolbar
‚îÇ       ‚îÇ   ‚îÇ   view_toolbar.py           # Barra de herramientas
‚îÇ       ‚îÇ   ‚îÇ   toolbar_navigation_buttons.py # Botones navegaci√≥n
‚îÇ       ‚îÇ   ‚îÇ   toolbar_state_buttons.py  # Botones de estado
‚îÇ       ‚îÇ   ‚îÇ   toolbar_button_styles.py  # Estilos de botones
‚îÇ       ‚îÇ   ‚îÇ
‚îÇ       ‚îÇ   ‚îÇ   # Focus Header & Dock
‚îÇ       ‚îÇ   ‚îÇ   focus_header_panel.py     # Panel de encabezado Focus
‚îÇ       ‚îÇ   ‚îÇ   focus_dock_widget.py      # Widget dock Focus
‚îÇ       ‚îÇ   ‚îÇ   focus_dock_layout.py      # Layout del dock
‚îÇ       ‚îÇ   ‚îÇ   focus_dock_handlers.py    # Handlers del dock
‚îÇ       ‚îÇ   ‚îÇ   focus_dock_update_helpers.py # Helpers de actualizaci√≥n
‚îÇ       ‚îÇ   ‚îÇ
‚îÇ       ‚îÇ   ‚îÇ   # List Components
‚îÇ       ‚îÇ   ‚îÇ   list_row_factory.py       # Factory de filas
‚îÇ       ‚îÇ   ‚îÇ   list_icon_delegate.py     # Delegado de iconos
‚îÇ       ‚îÇ   ‚îÇ   list_state_cell.py        # Celda de estado
‚îÇ       ‚îÇ   ‚îÇ   list_checkbox.py          # Checkbox de lista
‚îÇ       ‚îÇ   ‚îÇ   list_styles.py           # Estilos de lista
‚îÇ       ‚îÇ   ‚îÇ
‚îÇ       ‚îÇ   ‚îÇ   # Dock Components
‚îÇ       ‚îÇ   ‚îÇ   dock_separator.py         # Separador dock
‚îÇ       ‚îÇ   ‚îÇ
‚îÇ       ‚îÇ   ‚îÇ   # Icons & Display
‚îÇ       ‚îÇ   ‚îÇ   state_badge_widget.py     # Badge de estado
‚îÇ       ‚îÇ   ‚îÇ   text_elision.py          # Elisi√≥n de texto
‚îÇ       ‚îÇ   ‚îÇ   badge_overlay_widget.py   # Overlay de badge
‚îÇ       ‚îÇ   ‚îÇ
‚îÇ       ‚îÇ   ‚îÇ   # Overlays
‚îÇ       ‚îÇ   ‚îÇ   subfolder_overlay.py      # Overlay de subcarpetas
‚îÇ       ‚îÇ   ‚îÇ
‚îÇ       ‚îÇ   ‚îÇ   # Handlers & Migration
‚îÇ       ‚îÇ   ‚îÇ   file_state_migration.py   # Migraci√≥n de estados
‚îÇ       ‚îÇ
‚îÇ       ‚îî‚îÄ‚îÄ‚îÄwindows                   # Ventanas principales (20 archivos)
‚îÇ           ‚îÇ   __init__.py
‚îÇ           ‚îÇ   main_window.py           # Ventana principal
‚îÇ           ‚îÇ   main_window_setup.py     # Setup UI de ventana principal
‚îÇ           ‚îÇ   main_window_signals.py   # Conexi√≥n de se√±ales
‚îÇ           ‚îÇ   main_window_state.py     # Gesti√≥n de estado
‚îÇ           ‚îÇ   main_window_file_handler.py # Manejador de archivos
‚îÇ           ‚îÇ   desktop_window.py        # Ventana de escritorio
‚îÇ           ‚îÇ   bulk_rename_dialog.py    # Di√°logo renombrado masivo
‚îÇ           ‚îÇ   trash_delete_dialog.py   # Di√°logo eliminaci√≥n papelera
‚îÇ           ‚îÇ
‚îÇ           ‚îÇ   # Quick Preview (12 archivos - Refactorizado)
‚îÇ           ‚îÇ   quick_preview_window.py  # Ventana de preview r√°pido
‚îÇ           ‚îÇ   quick_preview_ui_setup.py # Configuraci√≥n UI preview
‚îÇ           ‚îÇ   quick_preview_loader.py   # Cargador de previews
‚îÇ           ‚îÇ   quick_preview_cache.py   # Cach√© de previews (10 entradas, mtime)
‚îÇ           ‚îÇ   quick_preview_navigation.py # Navegaci√≥n preview
‚îÇ           ‚îÇ   quick_preview_thumbnails.py # Miniaturas preview
‚îÇ           ‚îÇ   quick_preview_thumbnail_widget.py # Widget miniatura
‚îÇ           ‚îÇ   quick_preview_pdf_handler.py # Manejador PDF preview (async)
‚îÇ           ‚îÇ   quick_preview_header.py   # Encabezado preview
‚îÇ           ‚îÇ   quick_preview_styles.py   # Estilos preview
‚îÇ           ‚îÇ   quick_preview_animations.py # Animaciones preview
‚îÇ
‚îú‚îÄ‚îÄ‚îÄassets                           # Recursos
‚îÇ   ‚îú‚îÄ‚îÄ‚îÄicons                        # Iconos SVG gen√©ricos
‚îÇ   ‚îÇ   ‚îÇ   README.md
‚îÇ   ‚îÇ   ‚îÇ   ajustes.svg
‚îÇ   ‚îÇ   ‚îÇ   archive.svg
‚îÇ   ‚îÇ   ‚îÇ   code.svg
‚îÇ   ‚îÇ   ‚îÇ   config.svg
‚îÇ   ‚îÇ   ‚îÇ   doc.svg
‚îÇ   ‚îÇ   ‚îÇ   escritorio.svg
‚îÇ   ‚îÇ   ‚îÇ   exe.svg
‚îÇ   ‚îÇ   ‚îÇ   folder icon.svg
‚îÇ   ‚îÇ   ‚îÇ   generic.svg
‚îÇ   ‚îÇ   ‚îÇ   media.svg
‚îÇ   ‚îÇ   ‚îÇ   sheet.svg
‚îÇ   ‚îÇ   ‚îÇ   slide.svg
‚îÇ   ‚îÇ   ‚îÇ   text.svg
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄpoppler                      # Binarios Poppler (PDF)
‚îÇ       ‚îî‚îÄ‚îÄ‚îÄbin
‚îÇ           ‚îÇ   [40+ archivos: DLLs, EXEs para renderizado PDF]
‚îÇ
‚îú‚îÄ‚îÄ‚îÄbuild                            # Archivos de compilaci√≥n PyInstaller
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄmain                         # Build de aplicaci√≥n principal
‚îÇ       ‚îÇ   main.exe                 # Ejecutable compilado
‚îÇ       ‚îÇ   main.pkg
‚îÇ       ‚îÇ   Analysis-00.toc
‚îÇ       ‚îÇ   COLLECT-00.toc
‚îÇ       ‚îÇ   EXE-00.toc
‚îÇ       ‚îÇ   PYZ-00.pyz
‚îÇ       ‚îÇ   PYZ-00.toc
‚îÇ       ‚îÇ   PKG-00.toc
‚îÇ       ‚îÇ   warn-main.txt
‚îÇ       ‚îÇ   xref-main.html
‚îÇ       ‚îÇ   localpycs/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ[Archivos compilados .pyc]
‚îÇ
‚îú‚îÄ‚îÄ‚îÄdist                             # Distribuci√≥n final
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄmain                         # Paquete distribuible
‚îÇ       ‚îÇ   main.exe                 # Ejecutable final
‚îÇ       ‚îÇ   _internal/               # Dependencias empaquetadas
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ[247 archivos: DLLs, PYD, QM, etc.]
‚îÇ
‚îú‚îÄ‚îÄ‚îÄdata                             # Datos de aplicaci√≥n
‚îÇ   ‚îÇ   rename_templates.json        # Plantillas de renombrado
‚îÇ
‚îú‚îÄ‚îÄ‚îÄscripts                          # Scripts de automatizaci√≥n
‚îÇ   ‚îÇ   build_release.bat            # Script de compilaci√≥n y release
‚îÇ
‚îú‚îÄ‚îÄ‚îÄstorage                          # Almacenamiento persistente
‚îÇ   ‚îÇ   claritydesk.db               # Base de datos SQLite (estados)
‚îÇ   ‚îÇ   tabs.json                    # Estado de tabs
‚îÇ   ‚îÇ   dock_files/                  # Archivos en dock
‚îÇ   ‚îÇ   ‚îÇ   [215+ archivos: Python, Markdown, BAT, etc.]
‚îÇ   ‚îÇ   trash/                       # Papelera de reciclaje
‚îÇ   ‚îÇ   ‚îÇ   metadata.json
‚îÇ   ‚îÇ   ‚îÇ   files/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ[Archivos eliminados]
‚îÇ
‚îú‚îÄ‚îÄ‚îÄtests                            # Suite de pruebas
‚îÇ   ‚îÇ   __init__.py
‚îÇ   ‚îÇ   test_files_controller.py     # Pruebas de controlador archivos
‚îÇ   ‚îÇ   test_focus_controller.py     # Pruebas de controlador Focus
‚îÇ   ‚îÇ   test_tabs_controller.py       # Pruebas de controlador tabs
‚îÇ
‚îî‚îÄ‚îÄ‚îÄINFORMES                         # Documentaci√≥n y reportes
    ‚îÇ   AUDITORIA_CALIDAD_RAPIDA.md  # Auditor√≠a de calidad (95.4%)
    ‚îÇ   FASE1_COMPLETADA.md          # Fase 1: Eliminaci√≥n c√≥digo muerto
    ‚îÇ   FASE1_TABMANAGER_COMPLETADA.md # Fase 1: Refactor TabManager
    ‚îÇ   FASE2_COMPLETADA.md          # Fase 2: Divisi√≥n archivos grandes
    ‚îÇ   FASE3_COMPLETADA.md          # Fase 3: QThread workers
    ‚îÇ   FASE4_COMPLETADA.md          # Fase 4: Unificaci√≥n y cache
    ‚îÇ   FASE5_COMPLETADA.md          # Fase 5: Correcciones finales
    ‚îÇ   [20+ archivos de documentaci√≥n adicionales]
    ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄReglas Principales
            reglas_fase_b.mdc
            reglasprincipales.mdc

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

RESUMEN DE ESTRUCTURA:

üìÅ Core Application (4 archivos)
   - main.py: Punto de entrada principal
   - main.spec: Configuraci√≥n PyInstaller
   - requirements.txt: Dependencias Python
   - arbol.txt: Documentaci√≥n de estructura

üìÅ Managers (10 archivos)
   - tab_manager.py: Gestor central de tabs (221 l√≠neas) ‚ö†Ô∏è
   - tab_manager_actions.py: Acciones de tabs
   - tab_manager_signals.py: Handlers de se√±ales
   - tab_manager_init.py: Inicializaci√≥n
   - tab_manager_restore.py: Restauraci√≥n de estado
   - tab_manager_state.py: Estado de tabs
   - focus_manager.py: Orquestador de Focus
   - files_manager.py: Gestor de operaciones de archivos
   - file_state_manager.py: Gestor de estados

üìÅ Models (2 archivos)
   - file_operation_result.py: Resultado de operaciones
   - file_stack.py: Modelo de stack de archivos

üìÅ Services (61 archivos)
   - Tab Management: 11 archivos (incluye tab_utils.py)
   - File Operations: 7 archivos
   - File State Storage: 6 archivos (refactorizado en m√≥dulos)
   - Icons & Preview: 18 archivos (refactorizado en m√≥dulos)
   - QThread Workers: 3 archivos (nuevo - async operations)
   - Rename: 1 archivo
   - Trash Operations: 3 archivos
   - Desktop Operations: 4 archivos
   - File Stack & Filter: 4 archivos
   - System: 3 archivos

üìÅ UI Widgets (70 archivos)
   - Views Core: 3 archivos principales + 10 helpers modulares
   - File Tile: 9 archivos modulares (refactorizado)
   - Stack & Desktop Tiles: 8 archivos
   - Grid Components: 8 archivos
   - Tree Sidebar: 5 archivos
   - Drag & Drop: 6 archivos
   - Toolbar: 4 archivos
   - Focus Header & Dock: 5 archivos
   - List Components: 5 archivos
   - Dock Components: 1 archivo
   - Icons & Display: 3 archivos
   - Overlays: 1 archivo
   - Handlers & Migration: 1 archivo

üìÅ UI Windows (20 archivos)
   - main_window.py: Ventana principal
   - main_window_setup.py: Setup UI
   - main_window_signals.py: Conexi√≥n de se√±ales
   - main_window_state.py: Gesti√≥n de estado
   - main_window_file_handler.py: Manejador de archivos
   - desktop_window.py: Ventana de escritorio
   - bulk_rename_dialog.py: Di√°logo renombrado masivo
   - trash_delete_dialog.py: Di√°logo eliminaci√≥n papelera
   - quick_preview_*: 12 archivos de preview (refactorizado)

üìÅ Assets (2 directorios)
   - icons/: 13 archivos SVG + README
   - poppler/bin/: 40+ archivos para renderizado PDF

üìÅ Build & Distribution (2 directorios)
   - build/main/: Archivos de compilaci√≥n PyInstaller
   - dist/main/: Paquete distribuible final (247 archivos internos)

üìÅ Data & Storage (3 directorios)
   - data/: Configuraciones (plantillas renombrado)
   - storage/: Base de datos, estados, dock files (215+ archivos), papelera
   - scripts/: Automatizaci√≥n (build_release.bat)

üìÅ Tests (4 archivos)
   - Suite de pruebas unitarias para controladores principales

üìÅ Documentation (20+ archivos)
   - Informes de auditor√≠a, refactorizaci√≥n y an√°lisis

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

ARQUITECTURA:
- core/ ‚Üí L√≥gica pura, sin Qt
- models/ ‚Üí Dataclasses, estructuras simples
- services/ ‚Üí Operaciones complejas (puede usar Qt para sistema)
- managers/ ‚Üí Gesti√≥n de estado (puede usar Qt)
- ui/ ‚Üí Ventanas, widgets y vistas Qt

ESTADO ACTUAL (Enero 2025):
‚úÖ Arquitectura fija respetada (sin carpetas prohibidas)
‚úÖ Imports correctos (services/managers no importan UI)
‚ö†Ô∏è 1 archivo >200 l√≠neas: tab_manager.py (221 l√≠neas)
‚úÖ M√©todos peque√±os (‚â§40 l√≠neas despu√©s de refactorizaci√≥n)
‚úÖ C√≥digo modular y mantenible
‚úÖ Separaci√≥n clara de responsabilidades
‚úÖ Suite de pruebas implementada
‚úÖ Sistema de compilaci√≥n y distribuci√≥n configurado
‚úÖ Documentaci√≥n completa del proyecto

REFACTORIZACI√ìN COMPLETADA (Fases 1-5):
‚úÖ FASE 1: Eliminaci√≥n c√≥digo muerto y wrappers
   - Eliminados: trash_action_handler.py, desktop_visibility_service.py
   - Eliminados: tab_manager_action_wrapper.py, tab_manager_navigation_wrapper.py
   - Eliminados: tab_manager_state_wrapper.py, tab_manager_getters.py
   - Eliminados: tab_manager_navigation.py, tab_index_helper.py, tab_display_helper.py
   - TabManager refactorizado: 221 l√≠neas (antes 250+ con wrappers)

‚úÖ FASE 2: Divisi√≥n archivos grandes
   - icon_renderer.py ‚Üí 6 m√≥dulos (orquestador + especializados)
   - file_state_storage.py ‚Üí 6 m√≥dulos (orquestador + especializados)

‚úÖ FASE 3: QThread workers para operaciones pesadas
   - pdf_render_worker.py: Renderizado PDF async
   - docx_convert_worker.py: Conversi√≥n DOCX async
   - icon_batch_worker.py: Generaci√≥n batch iconos async

‚úÖ FASE 4: Unificaci√≥n duplicaci√≥n y mejora cache
   - normalize_path() unificado en tab_path_normalizer.py
   - Cache icon_service.py con verificaci√≥n mtime
   - Cache docx_converter.py con l√≠mite 500MB y auto-cleanup
   - Cache quick_preview_cache.py aumentado a 10 entradas con mtime

‚úÖ FASE 5: Correcciones finales
   - get_tab_display_name() movido a tab_utils.py
   - Todos los archivos verificados <200 l√≠neas (excepto tab_manager.py: 221)
   - Imports verificados y funcionando
   - App arranca sin errores

MEJORAS IMPLEMENTADAS:
‚úÖ Workers QThread para evitar congelamiento UI
‚úÖ Caches con validaci√≥n mtime para evitar datos obsoletos
‚úÖ L√≠mites de cache para evitar crecimiento descontrolado
‚úÖ Normalizaci√≥n de rutas centralizada
‚úÖ Eliminaci√≥n completa de wrappers innecesarios
‚úÖ Archivos modulares con responsabilidades √∫nicas

ESTAD√çSTICAS:
- Total archivos Python: ~163 archivos
- Total archivos UI Widgets: 70 archivos
- Total archivos UI Windows: 20 archivos
- Total archivos Services: 61 archivos
- Total archivos Managers: 10 archivos
- Total archivos Models: 2 archivos
- Total directorios: 25+ directorios organizados jer√°rquicamente
- Total l√≠neas de c√≥digo: ~15,000+ l√≠neas (estimado)
- Calificaci√≥n calidad: 95.4% (Auditor√≠a r√°pida)

ARCHIVOS ELIMINADOS EN REFACTORIZACI√ìN:
‚ùå app/services/trash_action_handler.py (wrapper vac√≠o)
‚ùå app/services/desktop_visibility_service.py (c√≥digo muerto)
‚ùå app/managers/tab_manager_action_wrapper.py (wrapper)
‚ùå app/managers/tab_manager_navigation_wrapper.py (wrapper)
‚ùå app/managers/tab_manager_state_wrapper.py (wrapper)
‚ùå app/managers/tab_manager_getters.py (getters simples)
‚ùå app/managers/tab_manager_navigation.py (fusionado)
‚ùå app/services/tab_index_helper.py (movido a tab_manager_actions.py)
‚ùå app/services/tab_display_helper.py (movido a tab_utils.py)

ARCHIVOS NUEVOS CREADOS EN REFACTORIZACI√ìN:
‚úÖ app/services/tab_utils.py (utilidades de tabs)
‚úÖ app/services/pdf_render_worker.py (worker async PDF)
‚úÖ app/services/docx_convert_worker.py (worker async DOCX)
‚úÖ app/services/icon_batch_worker.py (worker async iconos)
‚úÖ app/services/icon_renderer_constants.py (constantes)
‚úÖ app/services/icon_renderer_pdf.py (renderizado PDF)
‚úÖ app/services/icon_renderer_docx.py (renderizado DOCX)
‚úÖ app/services/icon_renderer_image.py (renderizado imagen)
‚úÖ app/services/icon_renderer_svg.py (renderizado SVG)
‚úÖ app/services/file_state_storage_helpers.py (helpers DB)
‚úÖ app/services/file_state_storage_init.py (inicializaci√≥n DB)
‚úÖ app/services/file_state_storage_crud.py (CRUD individual)
‚úÖ app/services/file_state_storage_batch.py (operaciones batch)
‚úÖ app/services/file_state_storage_rename.py (renombrado)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

NOTAS IMPORTANTES:

1. tab_manager.py tiene 221 l√≠neas (21 por encima del objetivo de 200)
   - Impacto: Bajo
   - Prioridad: Baja
   - Estado: Aceptable para producci√≥n

2. Todos los m√≥dulos refactorizados mantienen compatibilidad hacia atr√°s
   mediante re-exportaci√≥n de APIs p√∫blicas desde orquestadores.

3. Los workers QThread mejoran significativamente la responsividad de la UI
   durante operaciones pesadas (PDF, DOCX, batch iconos).

4. Los caches mejorados con validaci√≥n mtime garantizan datos actualizados
   y previenen crecimiento descontrolado.

5. La normalizaci√≥n de rutas est√° centralizada en tab_path_normalizer.py,
   eliminando duplicaci√≥n y asegurando consistencia.

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
